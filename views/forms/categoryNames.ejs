<% layout('layouts/boilerplate')%>
<div class="container">
    <h1 class="display-4 text-center">Unos kategorije</h1>
    <div class="progress" style="height: 3px">
        <div
            class="progress-bar bg-dark"
            role="progressbar"
            style="width: 33%"
            aria-valuenow="66"
            aria-valuemin="0"
            aria-valuemax="100"
        ></div>
    </div>
</div>
<div class="container vh-80 d-flex flex-column justify-content-center">
    <div class="row">
        <div class="col-lg-6">
            <form
                action="/create/kategorije"
                method="POST"
                novalidate
                class="validated-form"
            >
                <div class="row">
                    <% for (let i = 1; i <= currentUser.numOfCategories; i++)
                    {%>
                    <div class="category d-none" id="<%= i %>">
                        <div class="row">
                            <h4>Kategorija <%= i %></h4>
                            <div class="col-4">
                                <div class="mb-3">
                                    <label
                                        for="category<%= i %>"
                                        class="form-label"
                                        >Naziv kategorije</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control category-name"
                                        id="category<%= i %>"
                                        name="category[name]"
                                    />
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="mb-3">
                                    <label
                                        for="category<%= i %>Type"
                                        class="form-label"
                                        >Vrsta kategorije</label
                                    >
                                    <select
                                        class="form-select drop-down"
                                        id="category<%= i %>Type"
                                        name="category[type]"
                                    >
                                        <option selected value="number">
                                            Broj
                                        </option>
                                        <option value="text">Tekst (linija)</option>
                                        <option value="textarea">
                                            Tekst (blok linija)
                                        </option>
                                        <option value="date">Datum</option>
                                        <option value="more">PadajuÄ‡i izbornik</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col">
                                <label
                                    for="category<%= i %>Color"
                                    class="form-label"
                                    >Boja</label
                                >
                                <input
                                    type="color"
                                    class="form-control form-control-color category-color"
                                    id="category<%= i %>Color"
                                    value="#000000"
                                    name="category[color]"
                                />
                            </div>
                            <div class="col">
                                <label for="category<%= i %>Required" class="form-label">Obavezno</label>
                                    <input
                                        class="btn-check required-button"
                                        type="checkbox"
                                        value="y"
                                        name="category[required]"
                                        id="category<%= i %>Required"
                                        autocomplete="off"
                                    />
                                    <label
                                        class="btn btn-outline-dark"
                                        id="category<%= i %>ReqLabel"
                                        for="category<%= i %>Required"
                                    >
                                        Ne
                                    </label>
                            </div>
                        </div>
                        <div class="mb-3 d-none" id="category<%= i %>DD">
                            <label
                                for="category<%= i %>DropDown"
                                class="form-label"
                                >Kategorije 1 dropdown</label
                            >
                            <textarea
                                class="form-control"
                                id="category<%= i %>DropDown"
                                rows="3"
                                name="category[additional]"
                                placeholder="Unesite stavke koje Å¾elite imati u dropdownu sa zarezom(,) kao razmaknicom"
                            ></textarea>
                        </div>
                    </div>
                    <% } %>
                </div>
                <div
                    class="<%=currentUser.numOfCategories > 5 ? 'my-3' : 'd-none'%>"
                >
                    <span type="button" class="navigacija" id="previous">
                        ðŸ¡  Prije
                    </span>
                    <span type="button" class="navigacija float-end" id="next">
                        Poslje ðŸ¡¢
                    </span>
                </div>
                <button type="submit" class="btn btn-dark mb-3">Dalje</button>
            </form>
        </div>
        <div
            class="col-lg-4 offset-lg-1 d-flex flex-column justify-content-center"
        >
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title" id="category1li">Kategorija 1</h5>
                    <p class="card-text" id="category2li">Kategorija 2</p>
                </div>
                <ul class="list-group list-group-flush">
                    <% if (parseInt(currentUser.numOfCategories) % 2 === 0) {%>
                    <% for (let i = 2; i <= currentUser.numOfCategories / 2;
                    i++) {%>
                    <li class="list-group-item">
                        <span id="category<%=2*i-1%>li"
                            >Kategorija <%= 2*i - 1 %></span
                        >
                        <span id="category<%=2*i%>li" class="float-end"
                            >Kategorija <%= 2*i %></span
                        >
                    </li>
                    <% } %> <% } else {%> <% for (let i = 2; i <=
                    currentUser.numOfCategories / 2; i++) {%>
                    <li class="list-group-item">
                        <span id="category<%=2*i-1%>li"
                            >Kategorija <%= 2*i - 1 %></span
                        >
                        <span id="category<%=2*i%>li" class="float-end"
                            >Kategorija <%= 2*i %></span
                        >
                    </li>
                    <% } %>
                    <li
                        class="list-group-item"
                        id="category<%=currentUser.numOfCategories%>li"
                    >
                        Kategorija <%=currentUser.numOfCategories %>
                    </li>
                    <% } %>
                </ul>
                <div class="card-body">
                    <a href="#" class="card-link btn btn-primary">ViÅ¡e</a>
                    <a href="#" class="card-link float-end btn btn-danger"
                        >ObriÅ¡i</a
                    >
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/javascripts/category.js"></script>
